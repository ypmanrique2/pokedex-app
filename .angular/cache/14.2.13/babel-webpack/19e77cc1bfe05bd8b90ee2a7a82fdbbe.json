{"ast":null,"code":"import { BehaviorSubject } from 'rxjs';\nimport * as i0 from \"@angular/core\";\nexport let UserService = /*#__PURE__*/(() => {\n  class UserService {\n    constructor() {\n      this.loggedIn = false; // Clave única para persistir el perfil\n\n      this.USER_KEY = 'user_profile'; // Perfil por defecto (fallback si no hay sesión)\n\n      this.defaultProfile = {\n        nickname: '',\n        email: '',\n        favoriteTypes: [],\n        favoriteMovieGenres: [],\n        avatar: ''\n      }; // Estado reactivo de usuario; se inicializa desde localStorage.\n\n      this.userProfileSubject = new BehaviorSubject(this.loadProfile()); // Observable que consume los componentes\n\n      this.userProfile$ = this.userProfileSubject.asObservable();\n    }\n\n    isLoggedIn() {\n      return !!localStorage.getItem('authToken');\n    } // Retorna el perfil actual en memoria\n\n\n    getUserProfile() {\n      return this.userProfileSubject.value;\n    } // Actualiza perfil y lo persiste\n\n\n    updateUserProfile(profile) {\n      localStorage.setItem(this.USER_KEY, JSON.stringify(profile));\n      this.userProfileSubject.next(profile);\n    } // Limpia la sesión (logout)\n\n\n    clearProfile() {\n      localStorage.removeItem(this.USER_KEY);\n      this.userProfileSubject.next(this.defaultProfile);\n    } // Carga inicial desde localStorage\n\n\n    loadProfile() {\n      const saved = localStorage.getItem(this.USER_KEY);\n      return saved ? JSON.parse(saved) : this.defaultProfile;\n    }\n\n  }\n\n  UserService.ɵfac = function UserService_Factory(t) {\n    return new (t || UserService)();\n  };\n\n  UserService.ɵprov = /*@__PURE__*/i0.ɵɵdefineInjectable({\n    token: UserService,\n    factory: UserService.ɵfac,\n    providedIn: 'root' // Singleton global\n\n  });\n  return UserService;\n})();","map":null,"metadata":{},"sourceType":"module"}